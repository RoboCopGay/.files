# Criando aplica√ß√µes web e APIs Rest com GO

## <center><img src="golang.png" alt="Go Lang" style="max-height: 300px;" />+<img src="sexpistol.png" alt="Go Lang" style="max-height: 300px;"></center>



Hoje vou falar um pouco mais sobre Go Lang minha atual segunda linguagem perferida (porque nenhuma superou C at√© hoje), depois vou contar mais pra voc√™s sobre o meu ranking de mais amadas e mais odiadas, aguadem... Mas at√© l√° vamos falar de coisa boa, Go Lang √© uma linguagem √≥tima quando o assunto √© simplicidade, n√£o tem friscura, √© s√≥ abrir um arquivo e come√ßar a codar, mas eu tenho uma raiva inigualavel da lib padr√£o de cria√ß√£o de web applications, e tamb√©m da mais famosinha, o [Gorilla Mux](http://github.com/gorilla/mux), porque acho muito chata de implementar, tem uma em particular que gosto muito que √© a [Go Fiber](https://github.com/gofiber/fiber), mas ainda n√£o √© como eu gostaria de programar, ent√£o eu criei a [Sex Pistol](https://github.com/SexPistol), cujo principal objetivo, √© deixar a programa√ß√£o de web applications em Go mais sexy.

## Hello world

Antes de mais nada installe o SexPistol:

```shell
$ go get github.com/Plankiton/SexPistol
```

E depois √© s√≥ seguir o c√≥digo abaixo:

```go
package main
import "github.com/Plankiton/SexPistol"

func main() {
    app := new(Sex.Pistol)
    
    app.Add("/{name}", func(r Sex.Request) string {
        return Sex.Fmt("Hello, %s üëã!", r.PathVars["name"])
    })        // app.Add( path, route function, method list) default method list: []string{"GET"}
    
    app.Run() // app.Run( path, port ) defaults: ("/", 8000)
}
```

## Contexto e Responses

Caso voc√™ queira v√°rios roteadores separados (para organizar melhor o c√≥digo), basta setar o path no run:

```go
user_router := new(Sex.Pistol)
roles_router := new(Sex.Pistol)
go user_router.Run("/user")
go roles_router.Run("/role")
```

Ou tamb√©m roteadores em portas diferentes:

```go
user_router := new(Sex.Pistol)
roles_router := new(Sex.Pistol)
go user_router.Run(8000)
go roles_router.Run(5000, "/role")
```

> N√£o importa a ordem, se for uma string ele reconhece como path, se for um inteiro ele reconhece como porta.

Al√©m disso o Sex Pistol aceita v√°rios tipos diferentes de outputs de fun√ß√µes:

```go
func (r Sex.Request) (string, int)       // string para o cliente, status code
func (r Sex.Request) ([]byte, int)       // lista de bytes para o cliente, status code
func (r Sex.Request) (interface {}, int) // struct, array ou map parseado como json, status code
```

>  Se voc√™ n√£o colocar o status code ele vai ser 200 por padr√£o.

Al√©m desses atalhos muito √∫teis tamb√©m existe uma forma mais completa para entregar as responses, e essa forma nos permite setar cookies e headers e qualquer propriedade de uma response:

```go
func (r Sex.Request) Sex.Response {
    response := r.MkResponse()
    //                                 tempo de expira√ß√£o em ms
    response.SetCookie("key", "value", 30000)
    
    response.Header().Set("Content-Type", "application/json")
    
    // S√≥ aceita lista de bytes
    response.SetBody([]byte("Hello World!"))
}
```

